# 用户画像userDraw

项目需求：通过用户手机app使用记录，构建该用户的画像，包括性别、年龄等信息，每种指标
都以概率形式给出；用户画像的最终目的是为后续的商品推荐提供参考。

项目核心是两个MR程序，第一个MR主要完成对某一用户使用特定app进行次数和时长的统计；
第二个MR主要是在第一次的结果上，构建该用户的画像。

## 第一个MR程序UserDrawMapReduce
### 数据样本
`20160812|+2SJcwT8h0TSsxVd2pBMjA==|0.508|0.492|0.1|0.2|0.2|0.2|0.3|`
### 数据字段解释
* 日期 记录历史时间 20160812
* 手机号 +2SJcwT8h0TSsxVd2pBMjA==
* 男性权重 0.508
* 女性权重 0.492
* 年龄段1权重
* 年龄段2权重
* 年龄段3权重
* 年龄段4权重
* 年龄段5权重
### map端操作
* 输出key：手机号+appID
* 输出value：时间+手机号+appID+计数+时长
### reduce端操作
对app使用次数和时长进行累加，然后只输出value
## 第二次MR：
### map端操作
将上一阶段输出结果提取手机号作为map输出的key，value不变。
### reduce端操作：
1. 读取appTab表，它是关于app、性别和年龄的一个预先分布
2. 取出value中的appID和手机号
3. 根据appID取出appTab表中对应的初始权重
4. 根据用户计算每一个的用户性别和年龄画像
5. 输出`20160813|+/rmMLtMV+s+gXTDoOaoxQ==|0.5|0.5|0.1|0.2|0.2|0.2|0.3|`
## 用户画像UserDraw的构建
1. 重写toString方法
2. 性别的概率计算
3. 年龄的概率计算
4. 性别的初始化
5. 年龄的初始化
